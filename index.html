<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
   <style>
       body{
           background-color: whitesmoke;
           
       }
       canvas{
           background-color: rgb(196, 227, 228);
       }

   </style>
</head>
<body>
    
    <canvas id="myCanvas" width="600" height="600" style="border: 1px solid black"></canvas>
    <script>
        const myCanvas = document.getElementById("myCanvas");
        const ctx = myCanvas.getContext("2d");


        class Rectangulo {

                constructor(h,w,color,x,y,speed){
                    
                    this.h=h;
                    this.w=w;
                    this.color=color;
                    this.x=x;
                    this.y=y;
                    this.speed=speed;


                }

                colision(other){
                    
                    if(
                    this.x<other.x+other.w &&
                    this.x+this.w>other.x && 
                    this.y < other.y + other.h && 
                    this.y + this.h > other.y){
                        return true;
                    }
                    else return false;


                }
            }

        player= new Rectangulo(30,30,"black",5,5,5);
        target= new  Rectangulo(15,15,"red",250,250,0);
        function getRandomInt(max) {
        return Math.floor(Math.random() * max);
        }
        var direction='';
       
       // var drawing = false;
       // ctx.fillRect(x, y,20,20);
        addEventListener("keydown", (event) => {});
        
            onkeydown = (event) => {
               // console.log(event);
            
                 switch(event.keyCode){

                     case (40):
                        //abajo
                        
                        direction='down'
                     break;
                     
                     case (38):
                        //arriba
                     


                        direction='up';
                        //draw(event);
                        break;

                    case(37):
                        //izquierda
                        direction='left';
                        //draw(event);
                    break;

                    case(39):
                        //derecha

                        direction='right';

                        //draw(event);
                    break;

                    case(32):
                    player.speed+=5;

                        break;
                 }
           
                };

                function update(){

                    switch (direction){
                        case 'up':


                        if(player.y-10<0){
                            player.y=600;
                        }else{
                            player.y-=player.speed;
                        }

                            break;
                            
                            
                        case 'down':
                            if(player.y+10>600){
                                player.y=0;
                        }else{
                            player.y+=player.speed;
                        }
                            break;

                        case 'right':

                        if(player.x+10>600){
                            player.x=0;
                        }else{
                            player.x+=player.speed;

                        }
                            
                        break;
                        case 'left':
                        player.x-=player.speed;
                        if(player.x-10<0){
                            player.x=600;
                        }else{
                            player.x-=player.speed;
                        }
                           
                        break;
                        


                        
                    }
                    
                    const isColliding = player.colision(target);

                    //console.log(isColliding)
                    if(isColliding){
                        target.x=getRandomInt(585);
                        target.y=getRandomInt(585);
                    }


                }





                function draw(event) {
                    ctx.fillStyle ="rgb(196, 227, 228)";
                    ctx.fillRect(0, 0,600,600);
                    ctx.font = " 30px Algerian";
                    ctx.fillStyle = target.color;
                    ctx.fillRect(target.x, target.y,target.h,target.w);

                    ctx.fillStyle = player.color;
                    ctx.fillRect(player.x, player.y,player.h,player.w);
                    ctx.fillText("speed:"+player.speed,180,50);

                  update();
                  requestAnimationFrame(draw);

                 };

                 requestAnimationFrame(draw);


            


    </script>
    
</body>

</html>